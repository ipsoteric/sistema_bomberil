{% load i18n %}

<div class="rut-widget-container" data-widget-name="{{ widget.name }}">
    {# WRAPPER: Simula ser el input único #}
    <div class="rut-widget-wrapper form-control d-flex align-items-center bg-white {{ widget.attrs.class }}">
        
        {# 1. INPUT CUERPO (Escribible) #}
        <input type="text" 
               name="{{ widget.name }}_cuerpo" 
               class="rut-input-clean rut-cuerpo text-base" 
               maxlength="10"
               placeholder="12.345.678"
               autocomplete="off"
               {% if widget.value %}value="{{ widget.value|slice:':-2' }}"{% endif %}>
        
        {# SEPARADOR #}
        <span class="rut-separator text-base font-bold">-</span>
        
        {# 2. INPUT DV (Automático y Bloqueado) #}
        {# readonly: El usuario no puede escribir #}
        {# tabindex="-1": El usuario no puede llegar con tab #}
        <input type="text" 
               name="{{ widget.name }}_dv" 
               class="rut-input-clean rut-dv text-base font-bold text-muted" 
               maxlength="1" 
               placeholder=" "
               readonly 
               tabindex="-1"
               {% if widget.value %}value="{{ widget.value|slice:'-1:' }}"{% endif %}>

        {# 3. ICONO DE ESTADO (Explícito) #}
        <div class="rut-icon-container ms-2">
            <i class="fas fa-check-circle text-success d-none icon-valid"></i>
            <i class="fas fa-exclamation-circle text-danger d-none icon-invalid"></i>
        </div>
    </div>
    
    <div class="invalid-feedback-custom text-danger text-sm mt-1 fw-bold" style="display:none;"></div>
</div>