{# Plantilla base #}{% extends 'gestion_voluntarios/layouts/base.html' %}
{# Cargar assets #}{% load static %}
{# Título de la ventana #} {% block titulo_ventana %}Modificar a {{ voluntario.usuario.get_full_name }}{% endblock %}
{# Título de la página #} {% block titulo_pagina %}Modificar Voluntario{% endblock %}

{% block contenido %}

    <div class="container">
        <h1>Modificar Voluntario: {{ voluntario.usuario.get_full_name }}</h1>
        <p>Ajuste la información del perfil del voluntario. El historial (cargos, reconocimientos) se gestiona desde la Hoja de Vida.</p>
        
        <form id="modificar-form" method="POST">
            {% csrf_token %}

            {% if usuario_form.non_field_errors or voluntario_form.non_field_errors %}
                <div class="alert alert-danger" style="color: red; margin-bottom: 1rem; border: 1px solid red; padding: 10px;">
                    <p><strong>Error al guardar:</strong></p>
                    {{ usuario_form.non_field_errors }}
                    {{ voluntario_form.non_field_errors }}
                </div>
            {% endif %}

            <div class.="form-section">
                <h2>Datos de Acceso y Contacto</h2>
                
                {# Iteramos sobre los campos del formulario de Usuario #}
                {% for field in usuario_form %}
                    <div class="form-group">
                        {{ field.label_tag }}
                        {{ field }}
                        {% if field.errors %}
                            <div class="error-message" style="color: red; font-size: 0.9em; margin-top: 5px;">{{ field.errors|first }}</div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            <div class.="form-section">
                <h2>Información Bomberil y Personal</h2>

                {# Iteramos sobre los campos del formulario de Voluntario #}
                {% for field in voluntario_form %}
                    <div class="form-group">
                        {{ field.label_tag }}
                        {{ field }}
                        {% if field.errors %}
                            <div class="error-message" style="color: red; font-size: 0.9em; margin-top: 5px;">{{ field.errors|first }}</div>
                        {% endif %}
                        {% if field.help_text %}
                            <small class="help-text" style="font-size: 0.8em; color: #666; display: block; margin-top: 4px;">{{ field.help_text }}</small>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>

            <div class="button-group">
                <button type="submit" class="btn-primary">Guardar Cambios</button>
                <a href="{% url 'gestion_voluntarios:ruta_ver_voluntario' id=voluntario.id %}" class="btn-secondary">Cancelar</a>
            </div>
            
        </form>
    </div>
    
{% endblock  %}