{# Plantilla base #}{% extends 'gestion_voluntarios/layouts/base.html' %}
{# Cargar assets #}{% load static %}
{# Título de la ventana #} {% block titulo_ventana %}Exportar Listado{% endblock %}
{# Título de la página #} {% block titulo_pagina %}Exportar Listado de Voluntarios{% endblock %}

{% block contenido %}

<div class="container-fluid mt-4"> 
    <div class="panel">
        <div class="panel-header">
            {# Título Página: Tamaño 3XL y Negrita #}
            <h1 class="titulo-pagina text-3xl font-bold">Exportar Listado de Voluntarios</h1>
        </div>

        <div class="panel-body">
            
            <div class="card-reporte">
                {# Título Tarjeta: Tamaño XL y Negrita #}
                <h2 class="card-title-report text-xl font-bold">Filtros y Formato de Salida</h2>
                {# Descripción: Tamaño Base y Regular #}
                <p class="text-muted-report text-base font-regular">
                    Seleccione el rango para personalizar el reporte. Luego, elija el formato de archivo que mejor se adapte a sus necesidades.
                </p>

                <form action="{% url 'gestion_voluntarios:ruta_exportar_listado' %}" method="GET" target="_blank">
                    {# Usamos target="_blank" para que la descarga no "congele" la página #}
                    
                    <div class="form-row-report">
                        
                        {# --- ELIMINADO EL SELECTOR DE ESTACIÓN --- #}
                        {# El backend ahora usa la sesión activa automáticamente #}

                        <div class="form-group">
                            {# Label: Tamaño Base y Peso Medio #}
                            <label for="filtro_rango" class="label-custom text-base font-medium">Filtrar por Rango:</label>
                            {# Select: Tamaño Base #}
                            <select id="filtro_rango" name="rango" class="form-control text-base font-regular">
                                <option value="global">Todos los Rangos</option>
                                {% for cargo in cargos %}
                                <option value="{{ cargo.id }}">{{ cargo.nombre }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <div class="form-group">
                            {# Label: Tamaño Base y Peso Medio #}
                            <label for="formato_export" class="label-custom text-base font-medium">Formato de Exportación:</label>
                            {# Select: Tamaño Base #}
                            <select id="formato_export" name="format" class="form-control text-base font-regular" required>
                                <option value="csv">Valores Separados por Coma (.csv)</option>
                                <option value="excel">Microsoft Excel (.xlsx)</option>
                                <option value="pdf">Documento PDF (.pdf)</option>
                                <option value="json">Datos JSON (.json)</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-actions-report">
                        {# Botón Principal: Tamaño Base y Negrita #}
                        <button type="submit" class="btn btn-principal text-base font-bold">
                            <i class="fas fa-file-export" style="margin-right: 8px;"></i> Exportar Listado
                        </button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>

{% endblock  %}